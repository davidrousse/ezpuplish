<?php
// Cached transformation data
// Type: Group:search
// Charset: utf-8
// Cached transformation data
$data = array (
  'table' => 
  array (
    'ï»¿' => ' ',
    'â€¯' => ' ',
    'ÔŽ' => 'Ô',
    'ÔŒ' => 'Ô',
    'ÔŠ' => 'Ô‹',
    'Ôˆ' => 'Ô‰',
    'Ô†' => 'Ô‡',
    'Ô„' => 'Ô…',
    'Ô‚' => 'Ôƒ',
    'Ô€' => 'Ô',
    'Ó¹' => 'Ñ‹',
    'Ó¸' => 'Ñ‹',
    'Óµ' => 'Ñ‡',
    'Ó´' => 'Ñ‡',
    'Ó³' => 'Ñƒ',
    'Ó²' => 'Ñƒ',
    'Ó±' => 'Ñƒ',
    'Ó°' => 'Ñƒ',
    'Ó¯' => 'Ñƒ',
    'Ó®' => 'Ñƒ',
    'Ó­' => 'Ñ',
    'Ó¬' => 'Ñ',
    'Ó«' => 'Ó©',
    'Óª' => 'Ó©',
    'Ó¨' => 'Ó©',
    'Ó§' => 'Ð¾',
    'Ó¦' => 'Ð¾',
    'Ó¥' => 'Ð¸',
    'Ó¤' => 'Ð¸',
    'Ó£' => 'Ð¸',
    'Ó¢' => 'Ð¸',
    'Ó ' => 'Ó¡',
    'ÓŸ' => 'Ð·',
    'Óž' => 'Ð·',
    'Ó' => 'Ð¶',
    'Óœ' => 'Ð¶',
    'Ó›' => 'Ó™',
    'Óš' => 'Ó™',
    'Ó˜' => 'Ó™',
    'Ó—' => 'Ðµ',
    'Ó–' => 'Ðµ',
    'Ó”' => 'Ó•',
    'Ó“' => 'Ð°',
    'Ó’' => 'Ð°',
    'Ó‘' => 'Ð°',
    'Ó' => 'Ð°',
    'Ó' => 'ÓŽ',
    'Ó‹' => 'ÓŒ',
    'Ó‰' => 'ÓŠ',
    'Ó‡' => 'Óˆ',
    'Ó…' => 'Ó†',
    'Óƒ' => 'Ó„',
    'Ó‚' => 'Ð¶',
    'Ó' => 'Ð¶',
    'Ò¾' => 'Ò¿',
    'Ò¼' => 'Ò½',
    'Òº' => 'Ò»',
    'Ò¸' => 'Ò¹',
    'Ò¶' => 'Ò·',
    'Ò´' => 'Òµ',
    'Ò²' => 'Ò³',
    'Ò°' => 'Ò±',
    'Ò®' => 'Ò¯',
    'Ò¬' => 'Ò­',
    'Òª' => 'Ò«',
    'Ò¨' => 'Ò©',
    'Ò¦' => 'Ò§',
    'Ò¤' => 'Ò¥',
    'Ò¢' => 'Ò£',
    'Ò ' => 'Ò¡',
    'Òž' => 'ÒŸ',
    'Òœ' => 'Ò',
    'Òš' => 'Ò›',
    'Ò˜' => 'Ò™',
    'Ò–' => 'Ò—',
    'Ò”' => 'Ò•',
    'Ò’' => 'Ò“',
    'Ò' => 'Ò‘',
    'ÒŽ' => 'Ò',
    'ÒŒ' => 'Ò',
    'ÒŠ' => 'Ò‹',
    'Ò‰' => ' ',
    'Òˆ' => ' ',
    'Ò†' => ' ',
    'Ò…' => ' ',
    'Ò„' => ' ',
    'Òƒ' => ' ',
    'Ò‚' => ' ',
    'Ò€' => 'Ò',
    'Ñ¾' => 'Ñ¿',
    'Ñ¼' => 'Ñ½',
    'Ñº' => 'Ñ»',
    'Ñ¸' => 'Ñ¹',
    'Ñ·' => 'Ñµ',
    'Ñ¶' => 'Ñµ',
    'Ñ´' => 'Ñµ',
    'Ñ²' => 'Ñ³',
    'Ñ°' => 'Ñ±',
    'Ñ®' => 'Ñ¯',
    'Ñ¬' => 'Ñ­',
    'Ñª' => 'Ñ«',
    'Ñ¨' => 'Ñ©',
    'Ñ¦' => 'Ñ§',
    'Ñ¤' => 'Ñ¥',
    'Ñ¢' => 'Ñ£',
    'Ñ ' => 'Ñ¡',
    'Ñž' => 'Ñƒ',
    'Ñ' => 'Ð¸',
    'Ñœ' => 'Ðº',
    'Ñ—' => 'Ñ–',
    'Ñ“' => 'Ð³',
    'Ñ‘' => 'Ðµ',
    'Ñ' => 'Ðµ',
    'Ð¹' => 'Ð¸',
    'Ð¯' => 'Ñ',
    'Ð®' => 'ÑŽ',
    'Ð­' => 'Ñ',
    'Ð¬' => 'ÑŒ',
    'Ð«' => 'Ñ‹',
    'Ðª' => 'ÑŠ',
    'Ð©' => 'Ñ‰',
    'Ð¨' => 'Ñˆ',
    'Ð§' => 'Ñ‡',
    'Ð¦' => 'Ñ†',
    'Ð¥' => 'Ñ…',
    'Ð¤' => 'Ñ„',
    'Ð£' => 'Ñƒ',
    'Ð¢' => 'Ñ‚',
    'Ð¡' => 'Ñ',
    'Ð ' => 'Ñ€',
    'ÐŸ' => 'Ð¿',
    'Ðž' => 'Ð¾',
    'Ð' => 'Ð½',
    'Ðœ' => 'Ð¼',
    'Ð›' => 'Ð»',
    'Ðš' => 'Ðº',
    'Ð™' => 'Ð¸',
    'Ð˜' => 'Ð¸',
    'Ð—' => 'Ð·',
    'Ð–' => 'Ð¶',
    'Ð•' => 'Ðµ',
    'Ð”' => 'Ð´',
    'Ð“' => 'Ð³',
    'Ð’' => 'Ð²',
    'Ð‘' => 'Ð±',
    'Ð' => 'Ð°',
    'Ð' => 'ÑŸ',
    'ÐŽ' => 'Ñƒ',
    'Ð' => 'Ð¸',
    'ÐŒ' => 'Ðº',
    'Ð‹' => 'Ñ›',
    'ÐŠ' => 'Ñš',
    'Ð‰' => 'Ñ™',
    'Ðˆ' => 'Ñ˜',
    'Ð‡' => 'Ñ–',
    'Ð†' => 'Ñ–',
    'Ð…' => 'Ñ•',
    'Ð„' => 'Ñ”',
    'Ðƒ' => 'Ð³',
    'Ð‚' => 'Ñ’',
    'Ð' => 'Ðµ',
    'Ð€' => 'Ðµ',
    'Ï®' => 'Ï¯',
    'Ï¬' => 'Ï­',
    'Ïª' => 'Ï«',
    'Ï¨' => 'Ï©',
    'Ï¦' => 'Ï§',
    'Ï¤' => 'Ï¥',
    'Ï¢' => 'Ï£',
    'Ï ' => 'Ï¡',
    'Ïž' => 'ÏŸ',
    'Ïœ' => 'Ï',
    'Ïš' => 'Ï›',
    'Ï”' => 'Ï’',
    'ÏŽ' => 'Ï‰',
    'Ï' => 'Ï…',
    'ÏŒ' => 'Î¿',
    'Ï‹' => 'Ï…',
    'ÏŠ' => 'Î¹',
    'Î°' => 'Ï…',
    'Î¯' => 'Î¹',
    'Î®' => 'Î·',
    'Î­' => 'Îµ',
    'Î¬' => 'Î±',
    'Î«' => 'Ï…',
    'Îª' => 'Î¹',
    'Î©' => 'Ï‰',
    'Î¨' => 'Ïˆ',
    'Î§' => 'Ï‡',
    'Î¦' => 'Ï†',
    'Î¥' => 'Ï…',
    'Î¤' => 'Ï„',
    'Î£' => 'Ïƒ',
    'Î¡' => 'Ï',
    'Î ' => 'Ï€',
    'ÎŸ' => 'Î¿',
    'Îž' => 'Î¾',
    'Î' => 'Î½',
    'Îœ' => 'Î¼',
    'Î›' => 'Î»',
    'Îš' => 'Îº',
    'Î™' => 'Î¹',
    'Î˜' => 'Î¸',
    'Î—' => 'Î·',
    'Î–' => 'Î¶',
    'Î•' => 'Îµ',
    'Î”' => 'Î´',
    'Î“' => 'Î³',
    'Î’' => 'Î²',
    'Î‘' => 'Î±',
    'Î' => 'Î¹',
    'Î' => 'Ï‰',
    'ÎŽ' => 'Ï…',
    'ÎŒ' => 'Î¿',
    'ÎŠ' => 'Î¹',
    'Î‰' => 'Î·',
    'Îˆ' => 'Îµ',
    'Î‡' => ' ',
    'Î†' => 'Î±',
    'Î…' => '',
    'Î„' => ' ',
    'Í¾' => '.',
    'Íº' => ' ',
    'Ë' => ' ',
    'Ë' => ' ',
    'ËŽ' => ' ',
    'Ë‹' => ' ',
    'ËŠ' => ' ',
    'Å¾' => 'z',
    'Å½' => 'z',
    'Å¼' => 'z',
    'Å»' => 'z',
    'Åº' => 'z',
    'Å¹' => 'z',
    'Å¸' => 'y',
    'Å·' => 'y',
    'Å¶' => 'y',
    'Åµ' => 'w',
    'Å´' => 'w',
    'Å³' => 'u',
    'Å²' => 'u',
    'Å±' => 'u',
    'Å°' => 'u',
    'Å¯' => 'u',
    'Å®' => 'u',
    'Å­' => 'u',
    'Å¬' => 'u',
    'Å«' => 'u',
    'Åª' => 'u',
    'Å©' => 'u',
    'Å¨' => 'u',
    'Å§' => 't',
    'Å¦' => 't',
    'Å¥' => 't',
    'Å¤' => 't',
    'Å£' => 't',
    'Å¢' => 't',
    'Å¡' => 's',
    'Å ' => 's',
    'ÅŸ' => 's',
    'Åž' => 's',
    'Å' => 's',
    'Åœ' => 's',
    'Å›' => 's',
    'Åš' => 's',
    'Å™' => 'r',
    'Å˜' => 'r',
    'Å—' => 'r',
    'Å–' => 'r',
    'Å•' => 'r',
    'Å”' => 'r',
    'Å’' => 'Å“',
    'Å‘' => 'o',
    'Å' => 'o',
    'Å' => 'o',
    'ÅŽ' => 'o',
    'Å' => 'o',
    'ÅŒ' => 'o',
    'ÅŠ' => 'Å‹',
    'Åˆ' => 'n',
    'Å‡' => 'n',
    'Å†' => 'n',
    'Å…' => 'n',
    'Å„' => 'n',
    'Åƒ' => 'n',
    'Å‚' => 'l',
    'Å' => 'l',
    'Å€' => 'l',
    'Ä¿' => 'l',
    'Ä¾' => 'l',
    'Ä½' => 'l',
    'Ä¼' => 'l',
    'Ä»' => 'l',
    'Äº' => 'l',
    'Ä¹' => 'l',
    'Ä·' => 'k',
    'Ä¶' => 'k',
    'Äµ' => 'j',
    'Ä´' => 'j',
    'Ä²' => 'Ä³',
    'Ä±' => 'i',
    'Ä°' => 'i',
    'Ä¯' => 'i',
    'Ä®' => 'i',
    'Ä­' => 'i',
    'Ä¬' => 'i',
    'Ä«' => 'i',
    'Äª' => 'i',
    'Ä©' => 'i',
    'Ä¨' => 'i',
    'Ä§' => 'h',
    'Ä¦' => 'h',
    'Ä¥' => 'h',
    'Ä¤' => 'h',
    'Ä£' => 'g',
    'Ä¢' => 'g',
    'Ä¡' => 'g',
    'Ä ' => 'g',
    'ÄŸ' => 'g',
    'Äž' => 'g',
    'Ä' => 'g',
    'Äœ' => 'g',
    'Ä›' => 'e',
    'Äš' => 'e',
    'Ä™' => 'e',
    'Ä˜' => 'e',
    'Ä—' => 'e',
    'Ä–' => 'e',
    'Ä•' => 'e',
    'Ä”' => 'e',
    'Ä“' => 'e',
    'Ä’' => 'e',
    'Ä‘' => 'd',
    'Ä' => 'd',
    'Ä' => 'd',
    'ÄŽ' => 'd',
    'Ä' => 'c',
    'ÄŒ' => 'c',
    'Ä‹' => 'c',
    'ÄŠ' => 'c',
    'Ä‰' => 'c',
    'Äˆ' => 'c',
    'Ä‡' => 'c',
    'Ä†' => 'c',
    'Ä…' => 'a',
    'Ä„' => 'a',
    'Äƒ' => 'a',
    'Ä‚' => 'a',
    'Ä' => 'a',
    'Ä€' => 'a',
    'Ã¿' => 'y',
    'Ã¾' => 'th',
    'Ã½' => 'y',
    'Ã¼' => 'u',
    'Ã»' => 'u',
    'Ãº' => 'u',
    'Ã¹' => 'u',
    'Ã·' => ' ',
    'Ã¶' => 'o',
    'Ãµ' => 'o',
    'Ã´' => 'o',
    'Ã³' => 'o',
    'Ã²' => 'o',
    'Ã±' => 'n',
    'Ã°' => 'd',
    'Ã¯' => 'i',
    'Ã®' => 'i',
    'Ã­' => 'i',
    'Ã¬' => 'i',
    'Ã«' => 'e',
    'Ãª' => 'e',
    'Ã©' => 'e',
    'Ã¨' => 'e',
    'Ã§' => 'c',
    'Ã¤' => 'a',
    'Ã£' => 'a',
    'Ã¢' => 'a',
    'Ã¡' => 'a',
    'Ã ' => 'a',
    'ÃŸ' => 'ss',
    'Ãž' => 'th',
    'Ã' => 'y',
    'Ãœ' => 'u',
    'Ã›' => 'u',
    'Ãš' => 'u',
    'Ã™' => 'u',
    'Ã˜' => 'Ã¸',
    'Ã—' => '*',
    'Ã–' => 'o',
    'Ã•' => 'o',
    'Ã”' => 'o',
    'Ã“' => 'o',
    'Ã’' => 'o',
    'Ã‘' => 'n',
    'Ã' => 'd',
    'Ã' => 'i',
    'ÃŽ' => 'i',
    'Ã' => 'i',
    'ÃŒ' => 'i',
    'Ã‹' => 'e',
    'ÃŠ' => 'e',
    'Ã‰' => 'e',
    'Ãˆ' => 'e',
    'Ã‡' => 'c',
    'Ã†' => 'Ã¦',
    'Ã…' => 'Ã¥',
    'Ã„' => 'a',
    'Ãƒ' => 'a',
    'Ã‚' => 'a',
    'Ã' => 'a',
    'Ã€' => 'a',
    'Â¿' => '.',
    'Â¾' => '3 4',
    'Â½' => '1 2',
    'Â¼' => '1 4',
    'Â»' => '"',
    'Âº' => '1',
    'Â¹' => '1',
    'Â¸' => ' ',
    'Â·' => ' ',
    'Â¶' => ' ',
    'Âµ' => ' ',
    'Â´' => ' ',
    'Â³' => '3',
    'Â²' => '2',
    'Â±' => '  ',
    'Â°' => ' ',
    'Â¯' => ' ',
    'Â®' => ' r ',
    'Â­' => '',
    'Â¬' => ' ',
    'Â«' => '"',
    'Âª' => 'a',
    'Â©' => ' c ',
    'Â¨' => '',
    'Â§' => ' ',
    'Â¦' => ' ',
    'Â¥' => ' ',
    'Â¤' => ' ',
    'Â£' => ' ',
    'Â¢' => ' ',
    'Â¡' => '.',
    'Â ' => ' ',
    'ÂŸ' => 'y',
    'Âž' => ' ',
    'Â' => ' ',
    'Âœ' => ' ',
    'Â›' => ' ',
    'Âš' => ' ',
    'Â™' => ' ',
    'Â˜' => ' ',
    'Â—' => ' ',
    'Â–' => ' ',
    'Â•' => ' ',
    'Â”' => ' ',
    'Â“' => ' ',
    'Â’' => ' ',
    'Â‘' => ' ',
    'Â' => ' ',
    'Â' => ' ',
    'ÂŽ' => ' ',
    'Â' => ' ',
    'ÂŒ' => ' ',
    'Â‹' => ' ',
    'ÂŠ' => ' ',
    'Â‰' => ' ',
    'Âˆ' => ' ',
    'Â‡' => ' ',
    'Â†' => ' ',
    'Â…' => ' ',
    'Â„' => ' ',
    'Âƒ' => ' ',
    'Â‚' => ' ',
    'Â' => ' ',
    'Â€' => ' ',
    '~' => ' ',
    '}' => ' ',
    '|' => ' ',
    '{' => ' ',
    '`' => ' ',
    '^' => ' ',
    ']' => ' ',
    '\\' => ' ',
    '[' => ' ',
    'Z' => 'z',
    'Y' => 'y',
    'X' => 'x',
    'W' => 'w',
    'V' => 'v',
    'U' => 'u',
    'T' => 't',
    'S' => 's',
    'R' => 'r',
    'Q' => 'q',
    'P' => 'p',
    'O' => 'o',
    'N' => 'n',
    'M' => 'm',
    'L' => 'l',
    'K' => 'k',
    'J' => 'j',
    'I' => 'i',
    'H' => 'h',
    'G' => 'g',
    'F' => 'f',
    'E' => 'e',
    'D' => 'd',
    'C' => 'c',
    'B' => 'b',
    'A' => 'a',
    '@' => ' ',
    '?' => '.',
    '>' => ' ',
    '=' => ' ',
    '<' => ' ',
    ';' => ' ',
    ':' => ' ',
    '/' => ' ',
    '-' => ' ',
    ',' => '.',
    '+' => ' ',
    ')' => ' ',
    '(' => ' ',
    '\'' => ' ',
    '&' => ' ',
    '$' => ' ',
    '#' => ' ',
    '!' => '.',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '
' => ' ',
    '	' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
    '' => ' ',
  ),
);
$text = strtr( $text, $data['table'] );
// add N-Gram(N=2)  chinese / japanese / korean multibyte characters
$codec = eZTextCodec::instance( false, 'unicode' );

$unicodeValueArray = $codec->convertString( $text );

$normalizedTextArray = array();
$bFlag = false;
foreach ( array_keys( $unicodeValueArray ) as $valueKey )
{
    // Check for word characters that should be broken up for search
    if ( ( $unicodeValueArray[$valueKey] >= 12289 and
           $unicodeValueArray[$valueKey] <= 12542 ) or
         ( $unicodeValueArray[$valueKey] >= 13312 and
           $unicodeValueArray[$valueKey] <= 40863 ) or
         ( $unicodeValueArray[$valueKey] >= 44032 and
           $unicodeValueArray[$valueKey] <= 55203 ) )
    {
        if ( $bFlag )
        {
            $normalizedTextArray[] = $unicodeValueArray[$valueKey];
        }
        $normalizedTextArray[] = 32; // A space
        $normalizedTextArray[] = $unicodeValueArray[$valueKey];
        $bFlag = true;
    }
    else
    {
        if ( $bFlag )
        {
            $normalizedTextArray[] = 32; // A space
        }
        $normalizedTextArray[] = $unicodeValueArray[$valueKey];
        $bFlag = false;
    }
}
if ( $bFlag )
{
    $normalizedTextArray[count($normalizedTextArray)-1]=32;
}
$revCodec = eZTextCodec::instance( 'unicode', false ); // false means use internal charset
$text = $revCodec->convertString( $normalizedTextArray );
$text = preg_replace( array( "#(\.){2,}#",
                             "#^\.#",
                             "#\s\.#",
                             "#\.\s#",
                             "#\.$#",
                             "#([^0-9])%#" ),
                      array( " ",
                             " ",
                             " ",
                             " ",
                             " ",
                             " " ),
                      $text );
$ini = eZINI::instance();
if ( $ini->variable( 'SearchSettings', 'EnableWildcard' ) != 'true' )
{
    $text = str_replace( "*", " ", $text );
}
$charset = eZTextCodec::internalCharset();
$hasUTF8 = ( $charset == "utf-8" );

if ( $hasUTF8 )
{
    $text = preg_replace( "#(\s+)#u", " ", $text );
}
else
{
    $text = preg_replace( "#(\s+)#", " ", $text );
}
?>
